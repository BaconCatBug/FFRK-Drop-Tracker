<!-- #######  YAY, I AM THE SOURCE EDITOR! #########-->
<p>Please remember to troubleshoot by first closing everything (Script and Emulator) and re-opening it. If that doesn't fix it, feel free to ask on Reddit, either via the main post or by pinging /u/BaconCatBug</p>
<p><br /><strong>This guide is intended to aid anyone and everyone in getting a way to display the drops of a battle without having to complete it, thus allowing for more time efficient farming of Crystals, Motes and anything else you may desire; or in getting their Final Fantasy Record Keeper inventory, abilities, orbs and Record Materia in a usable csv format, without giving full and unrestricted access to your account to a 3rd party website (which is now dead due to the removal of one time codes for better account security), primarily for use with my spreadsheet <a href="https://docs.google.com/spreadsheets/d/1w6UnKkJzGFMG6l67UI_6TS3Od_gbTOltxNu-EuyM4Pw/edit#gid=996200154">here.</a></strong></p>
<p><br />Extra special thanks to /u/vexnon&nbsp; for making the mitmproxy scripts. Thanks to /u/therealhughjeffner for a tip regarding the command line. Thanks to /u/Gitpush1337 for an expanded drop database csv file.</p>
<p><strong>*******************************</strong><br /><strong>IMPORTANT PREPARATION START</strong><br /><strong>PLEASE NOTE THAT AN EMULATOR IS NOT MANDATORY TO USE EITHER TOOL, IT'S JUST EASIER. YOU CAN SET UP A PROXY ON YOUR LOCAL NETWORK AND SET YOUR PHONE TO CONNECT TO THE PROXY.</strong><br /><strong>*******************************</strong></p>
<ul>
<li>The very first thing you need to do is make sure that CPU Virtualisation is enabled/supported by your PC. Without it, any form of android emulation is going to run slower than molasses uphill at the South Pole.</li>
<li>Next, ensure your game is linked to your Google Play account. This will allow you to swap seamlessly between your phone and PC.</li>
<li>Install an Android Emulator of your choice. However, several emulators recently have been not respecting the proxy bypass settings for localhost. This will cause any attempt to connect via a proxy to eat shit and die. So far I can confirm that Nox App Player is the best emulator to use for this, while an old version of MEmu (2.9.6.1) will work. Please let people know in the comments if an emulator works for you and what the version number is. On a personal note I use Nox 5.0.0.1</li>
<li>Click on the Settings shortcut, scroll down to "Date and Time", disable "Automatic Time Zone" (although keep "Automatic Date and Time") and manually pick your location in "Select Time Zone".</li>
<li>If you have a non-English keyboard layout, you may need to change the keyboard language in the "Language and Input" section of the settings panel or as a last resort clicking the "Default" setting there and disabling the physical keyboard altogether.</li>
<li>Open Google Play store, click the top left button, go to "My Apps" and run any updates needed. Then search for and install "Google Play Games" and then "Final Fantasy Record Keeper". <strong>**The order is important.**</strong></li>
<li>If for some reason FFRK isn't showing on the app store because DeNA is too restrictive on it's compatible devices setting, install it manually <a href="https://apkpure.com/final-fantasy-record-keeper/com.dena.west.FFRK/">with the APK from APKPure.</a><br /><br /></li>
</ul>
<p><strong>*******************************<br />IMPORTANT PREPARATION END</strong><br /><strong>*******************************</strong><br />0) Install the x86 version of the Visual C++ Redistributable for Visual Studio 2015 <a href="https://www.microsoft.com/en-us/download/details.aspx?id=48145">https://www.microsoft.com/en-us/download/details.aspx?id=48145</a></p>
<p><br />1) Go to <a href="https://mitmproxy.org/">https://mitmproxy.org/</a> and click the "latest releases" link. <a href="http://prntscr.com/ff9yj1">http://prntscr.com/ff9yj1</a> and download the latest windows installer <a href="http://prntscr.com/ff9yn9">http://prntscr.com/ff9yn9</a></p>
<p><br />2) Run the installer, clicking next until the final window. Uncheck "run the ui" or close it if it did run.<br /><br />3) Find your local IP and write it down somewhere. There are many ways to do this. If you're savvy enough to do it with ipconfig /all, do so. For the non-tech savvy, you can use this site, you want the top IP <a href="http://prntscr.com/feuhx6">http://prntscr.com/feuhx6</a> <a href="https://www.whatismybrowser.com/detect/what-is-my-local-ip-address">https://www.whatismybrowser.com/detect/what-is-my-local-ip-address</a><br /><br />4) Fire up your Android Emulator. Click "Settings", then "Wifi". If it says "Connected via wifi assistant", toggle the wifi off and on, then click to connect to the network. Long press the network, click "Modify Network", Click "Advanced Options", click on the "None" under Proxy and change it to "Manual". <a href="http://prntscr.com/feujr2">http://prntscr.com/feujr2</a><br /><br />5) Set the Proxy hostname to the IP noted down before. Set the port to 8080 (Yes you have to type it in anyway). In the "Bypass proxy for" box, copy and paste one of the following without quotes. If the "Save" button is greyed out, check for erroneous spaces. <a href="http://prntscr.com/feul26">http://prntscr.com/feul26</a><br />Global:<br />&nbsp; &nbsp; 127.0.0.1,lcd-prod.appspot.com,live.chartboost.com,android.clients.google.com,googleapis.com,app.adjust.io<br />Japan:<br />&nbsp; &nbsp; 127.0.0.1,lcd-prod.appspot.com,live.chartboost.com,android.clients.google.com,googleapis.com,ssl.sp.mbga-platform.jp,ssl.sp.mbga.jp,app.adjust.io</p>
<p><br /><strong>IMPORTANT NOTE:</strong> Once you set up your emulator to point at the proxy, it will need to be running whenever you load up the game on that emulator.</p>
<p><br />6) Set up a new folder somewhere for you to work in. Go here to get the scripts:<br /><a href="https://github.com/BaconCatBug/FFRK-Drop-Tracker">https://github.com/BaconCatBug/FFRK-Drop-Tracker</a><br />Go there and click "Clone or Download &gt; Download Zip" in the top right corner. <a href="http://prntscr.com/fht3gy">http://prntscr.com/fht3gy</a>. Open these Zips and extract all files to your working folder. <a href="http://prntscr.com/fht2b5">http://prntscr.com/fht2b5</a></p>
<p><br />7) Hold Shift and Right Click some empty space and open a command window in that folder (This is important, don't run it from the start menu). Run the top script to see drops, the bottom script to export inventory:</p>
<ul>
<li>mitmdump -q -b xxx.xxx.xxx.xxx -s ffrk_drop_tracker_v1.7.py</li>
<li>mitmdump -q -b xxx.xxx.xxx.xxx -s ffrk_inventory_tracker_v1.7.py</li>
</ul>
<p><strong>Explanation:</strong> "mitmdump" is the proxy program, "-q" is quiet mode so it doesn't spam the screen with traffic, "-b xxx.xxx.xxx.xxx binds the IP given to the proxy and "-s ffrk_drop_tracker_v1.7.py" means to run the script ffrk_drop_tracker.py. Note you need to replace xxx.xxx.xxx.xxx with your IP found in step 3.</p>
<p><br />Optionally, you can save ONE of the command lines (only one per .bat or it won't work) in a text file, rename it to whatever you want (for example "FFRKTracker.bat") and use that to launch it rather than needing to manually type it out every time. If you make a .bat you can replace xxx.xxx.xxx.xxx with %COMPUTERNAME% but sometimes this results in an incorrect IP being detected. If this happens, just change it back to a raw IP.</p>
<p><br /><strong>IMPORTANT NOTE:</strong> Unless you've set a static local IP (and you'll know if you have), your local IP can sometimes change. If things stop working, check if this has happened and edit the command accordingly.&nbsp;<br /><strong>ANOTHER IMPORTANT NOTE:</strong> Due to the -q flag, it might look like nothing is happening. This is not the case, it is still running in the background. The -q flag even suppresses the "Proxy server listening at" message.<br /><strong>YET ANOTHER IMPORTANT NOTE:</strong> Once you set up your emulator to point at the proxy, it will need to be running whenever you load up the game on that emulator.<br /><br />8) If everything is set up correctly, mitmproxy will run and start listening for connections. <a href="http://prntscr.com/h1bacn">http://prntscr.com/h1bacn</a></p>
<p><br />9) In your emulator, load up FFRK.<br /><br />To export your Inventory, run the command from step 7 with the ffrk_tracker_v1.7.py in it:<br />10a) Click the Inventory button, then the View/Sell Items button, then the Vault Button, then each tab in the vault.<br />10b) Boom, you should have a whole bunch of .csv (Comma Separated Values) files with all your lovely data. http://prntscr.com/ff9xwc<br />10c) Use my spreadsheet https://docs.google.com/spreadsheets/d/1w6UnKkJzGFMG6l67UI_6TS3Od_gbTOltxNu-EuyM4Pw/edit#gid=996200154 to have a nice graphical way of sharing your stuff.<br />10d) Microsoft Excel likes to mangle the CSV if you open it directly. Instead open it in Notepad and copy-paste the data into Excel to get it copyable for the spreadsheet. If you use Libreoffice, set the import encoding to UTF-8.<br /><br />To farm drops, run the command from step 7 with the ffrk_drop_tracker_v1.6.py in it:<br />11a) Enter a battle.<br />11b) Boom, you should see your drops! http://prntscr.com/fht31i<br /><br />If anyone has any questions or suggestions on improving this guide, please let me know.<br />I have not tested doing this with a phone pointed to a PC running the mitmproxy on a local network. It should work (I think) but I have not tested it.<br />If you use an emulator and it works, please let me know which one and which version of the emulator you used so I can make a list of working emulators.</p>
<p><br /><span style="text-decoration: underline;"><strong>Working Emulators</strong></span></p>
<ul>
<li>Nox App Player (5.0.0.1)&nbsp; <a href="https://www.bignox.com/">https://www.bignox.com/</a></li>
<li>Nox App Player (3.8.3.1)</li>
<li>MEmu (2.9.6.1) <a href="http://www.memuplay.com/blog/index.php/2017/03/03/memu-2-9-6-is-released/">http://www.memuplay.com/blog/index.php/2017/03/03/memu-2-9-6-is-released/</a></li>
<li><a href="https://www.reddit.com/r/FFRecordKeeper/comments/6vhyod/ffrk_drop_tracker_export_your_entire_inventory/dnde6mq">Information on how to configure Genymotion to work&nbsp;with FFRK Drop Tracker.</a></li>
</ul>